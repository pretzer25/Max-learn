<script type="module">
    function encode(string) {
      if (!string) return string;
      return encodeURIComponent(
        string
          .toString()
          .split("")
          .map((char, index) =>
            index % 2 ? String.fromCharCode(char.charCodeAt() ^ 2) : char
          )
          .join("")
      );
    }

    function decode(string) {
      if (!string) return string;
      let [input, ...search] = string.split("?");

      return (
        decodeURIComponent(input)
          .split("")
          .map((char, ind) =>
            ind % 2 ? String.fromCharCode(char.charCodeAt(0) ^ 2) : char
          )
          .join("") + (search.length ? "?" + search.join("?") : "")
      );
    }

    const encoderInput = document.querySelector("#encoder-input");
    const encodeButton = document.getElementById("encodeButton");
    const encoderOutput = document.querySelector("#encoder-output");
    const decoderInput = document.querySelector("#decoder-input");
    const decodeButton = document.getElementById("decodeButton");
    const decoderOutput = document.querySelector("#decoder-output");

//            encodeButton.addEventListener("click", () => {
//            const encoded = encode(encoderInput.value);
//            encoderOutput.value = encoded;
//        });

      decodeButton.addEventListener("click", () => {
          const decoded = decode(decoderInput.value);
          decoderOutput.value = decoded;
          go(decoded);
      });

          function go(input) {
        var websiteUrl = "/./service/" + input;
        setTimeout(function () {
          window.location.href = websiteUrl;
        }, 100);
      }
    </script>
<!-- <br><br><br><br><br><br><br><br><br><br><br><br> -->
<middle>
    <input type="text" autocapitalize="off" autocomplete="off" placeholder="Url" id="decoder-input">
    <button id="decodeButton">Go!</button>
</middle>
<br><br><hr>
<middle>
 <input type="text" readonly="" placeholder="Output" id="decoder-output">
    </middle>
<br>
<!--
<input type="text" autocapitalize="off" autocomplete="off" placeholder="Input" id="encoder-input">
<input type="text" readonly="" placeholder="Output" id="encoder-output">
        <button id="encodeButton">Decode</button>
-->

